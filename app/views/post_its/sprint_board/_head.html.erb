<table class="box attributes">
  <tr>
    <td>
      <div class="tabular">
        <p>
          <label><%= l(:label_sprint) %>:</label>
          <%- options = project.sprints.collect{|other_sprint| [other_sprint.name, path.call(other_sprint)]}
              options = options_for_select(options, path.call(sprint)) -%>
          <%= select_tag "selected_sprint_id", options,
                         :onchange => "if (this.value != '') { window.location = this.value; }" %>
        </p>
        <p>
          <label><%= l(:field_start_date) %>:</label>
          <%= format_date sprint.start_date %>
        </p>
        <p>
          <label><%= l(:field_end_date) %>:</label>
          <%= format_date sprint.end_date %>
        </p>
      </div>
    </td>
    <td>
      <div class="tabular">
        <p>
          <label><%= l(:label_sps_by_pbi) %>:</label>
          <%- phs, total = sprint.phs_by_pbi -%>
          <%= phs.collect{|ph| l(:label_sps_by_pbi_stat, :tracker => ph[:tracker][:name], :phs => ph[:total], :percentage => ph[:percentage])}.concat([l(:label_sps_by_pbi_total, :phs => total)]).join(", ") %>
        </p>
        <p>
          <label><%= l(:label_time_by_activity) %>:</label>
          <%- time_entries, total = sprint.time_entries_by_activity -%>
          <%= time_entries.collect{|activity| l(:label_time_by_activity_stat, :activity => activity[:activity][:name], :time => activity[:total], :percentage => activity[:percentage])}.concat([l(:label_time_by_activity_total, :time => total)]).join(", ") %>
        </p>
      </div>
    </td>
  </tr>
  <%- if !(sprint.description.blank?) -%>
  <tr>
    <td colspan="2">
      <%= raw(Redmine::WikiFormatting::Textile::Formatter.new(sprint.description).to_html(true)) %>
    </td>
  </tr>
  <%- end -%>
</table>